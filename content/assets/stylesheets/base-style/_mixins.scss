// borrowed from Bourbon
// http://bourbon.io/

// HiDPI mixin. Default value set to 1.3 to target Google Nexus 7 (http://bjango.com/articles/min-device-pixel-ratio/)
@mixin hidpi($ratio: 1.3) {
  @media only screen and (-webkit-min-device-pixel-ratio: $ratio),
  only screen and (min--moz-device-pixel-ratio: $ratio),
  only screen and (-o-min-device-pixel-ratio: #{$ratio}/1),
  only screen and (min-resolution: #{round($ratio*96)}dpi),
  only screen and (min-resolution: #{$ratio}dppx) {
    @content;
  }
}

// type

@mixin font-size($font-size) {
  font-size: $font-size;
  font-size: ($font-size / $base-font-size) * 1rem;
  line-height: ceil($font-size/$base-line-height) * ($base-line-height/$font-size);
}

// interaction

@mixin selection {
  @each $prefix in "-moz-", "-webkit-", "" {
    ::#{$prefix}-selection {
      @content;
    }
  }
}

@mixin color-link($color1, $color2: $color1) {
  color: $color1;
  #{$interact} {
    color: $color2;
  }
}

// retina display

@mixin subtle-pattern($image, $size, $fallback) {
  background: $fallback image-url("patterns/#{$image}.png");
  background-size: $size;
  @include hidpi {
    background-image: image-url("patterns/#{$image}_@2X.png");
  }
}

// responsive

$palm-end:  $lap-start - 1px;
$lap-end:   $desk-start - 1px;
$desk-end:  $widescreen-start - 1px;

@mixin media-query($media-query){
  @media only screen {
    @if $media-query == palm {
      @media (max-width: $palm-end) { @content; }
    }
    @if $media-query == lap {
      @media (min-width: $lap-start) {
        @media (max-width: $lap-end) { @content; }
      }
    }
    @if $media-query == lap-and-up {
      @media (min-width: $lap-start) { @content; }
    }
    @if $media-query == portable {
      @media (max-width: $lap-end) { @content; }
    }
    @if $media-query == desk {
      @media (min-width: $desk-start) {
        @media (max-width: $desk-end) { @content; }
      }
    }
    @if $media-query == desk-and-up {
      @media (min-width: $desk-start) { @content; }
    }
    @if $media-query == widescreen {
      @media (min-width: $widescreen-start) { @content; }
    }
  }
}

// bleeding

@mixin bleed($side: both, $amount: $site-padding) {
  @if $side == left {
    margin-left:  - $amount;
    padding-left:   $amount;
  }
  @if $side == right {
    margin-right: - $amount;
    padding-right:  $amount;
  }
  @if $side == both {
    margin-left:  - $amount;
    margin-right: - $amount;
    padding-left:   $amount;
    padding-right:  $amount;
  }
}

@mixin no-bleed {
  margin-left:    0;
  margin-right:   0;
  padding-left:   0;
  padding-right:  0;
}
